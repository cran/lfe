
R Under development (unstable) (2013-12-03 r64376) -- "Unsuffered Consequences"
Copyright (C) 2013 The R Foundation for Statistical Computing
Platform: x86_64-unknown-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(lfe)
Loading required package: Matrix
> options(lfe.threads=2)
> set.seed(65318)
> x <- rnorm(500)
> x2 <- rnorm(length(x))
> 
> ## create individual and firm
> id <- factor(sample(10,length(x),replace=TRUE))
> firm <- factor(sample(6,length(x),replace=TRUE,prob=c(2,rep(1,5))))
> 
> ## effects
> id.eff <- rnorm(nlevels(id))
> firm.eff <- rnorm(nlevels(firm))
> 
> ## left hand side
> y <- x + 0.25*x2 + id.eff[id] + firm.eff[firm] + rnorm(length(x))
> 
> ## estimate
> summary(est <- felm(y ~ x+x2 + G(id) + G(firm)))

Call:
   felm(formula = y ~ x + x2 + G(id) + G(firm)) 

Residuals:
      Min        1Q    Median        3Q       Max 
-2.962642 -0.735486  0.007925  0.774946  2.680924 

Coefficients:
   Estimate Std. Error t value Pr(>|t|)    
x   0.96251    0.04843  19.875  < 2e-16 ***
x2  0.22600    0.04828   4.681 3.71e-06 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.043 on 483 degrees of freedom
Multiple R-squared: 0.7205   Adjusted R-squared: 0.7107 
F-statistic: 77.83 on 16 and 483 DF, p-value: < 2.2e-16 


> getfe(est)
           effect obs comp   fe idx
id.1    1.3101204  41    1   id   1
id.2   -0.5631450  52    1   id   2
id.3   -2.5659439  68    1   id   3
id.4    0.1408508  53    1   id   4
id.5   -0.1805894  39    1   id   5
id.6    0.4311941  38    1   id   6
id.7   -0.6493778  62    1   id   7
id.8   -0.3652157  49    1   id   8
id.9    0.9528829  42    1   id   9
id.10  -0.7117884  56    1   id  10
firm.1  0.0000000 132    1 firm   1
firm.2  0.5781605  69    1 firm   2
firm.3 -0.1887462  74    1 firm   3
firm.4  1.5127268  66    1 firm   4
firm.5  1.4467863  72    1 firm   5
firm.6 -0.7879367  87    1 firm   6
> summary(lm(y ~ x + x2 + id + firm))

Call:
lm(formula = y ~ x + x2 + id + firm)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.96264 -0.73549  0.00793  0.77495  2.68092 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)  1.31012    0.18078   7.247 1.70e-12 ***
x            0.96251    0.04843  19.875  < 2e-16 ***
x2           0.22600    0.04828   4.681 3.71e-06 ***
id2         -1.87327    0.21842  -8.576  < 2e-16 ***
id3         -3.87606    0.20659 -18.762  < 2e-16 ***
id4         -1.16927    0.21762  -5.373 1.21e-07 ***
id5         -1.49071    0.23434  -6.361 4.65e-10 ***
id6         -0.87893    0.23511  -3.738 0.000207 ***
id7         -1.95950    0.21063  -9.303  < 2e-16 ***
id8         -1.67534    0.22160  -7.560 2.04e-13 ***
id9         -0.35724    0.23007  -1.553 0.121143    
id10        -2.02191    0.21488  -9.409  < 2e-16 ***
firm2        0.57816    0.15694   3.684 0.000256 ***
firm3       -0.18875    0.15251  -1.238 0.216469    
firm4        1.51273    0.15811   9.568  < 2e-16 ***
firm5        1.44679    0.15325   9.441  < 2e-16 ***
firm6       -0.78794    0.14579  -5.404 1.02e-07 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.043 on 483 degrees of freedom
Multiple R-squared:  0.7205,	Adjusted R-squared:  0.7113 
F-statistic: 77.83 on 16 and 483 DF,  p-value: < 2.2e-16

> 
> proc.time()
   user  system elapsed 
  4.084   0.128   4.172 
