
R Under development (unstable) (2013-07-27 r63426) -- "Unsuffered Consequences"
Copyright (C) 2013 The R Foundation for Statistical Computing
Platform: x86_64-unknown-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(lfe)
Loading required package: Matrix
Loading required package: lattice
Loading required package: Rcgmin
Loading required package: numDeriv
> options(lfe.threads=2)
> set.seed(42)
> x <- rnorm(1000)
> x2 <- rnorm(length(x))
> 
> id <- factor(sample(10,length(x),replace=TRUE))
> firm <- factor(sample(3,length(x),replace=TRUE,prob=c(2,1,1)))
> 
> id.eff <- rnorm(nlevels(id))
> firm.eff <- rnorm(nlevels(firm))
> 
> ## left hand side
> u <- rnorm(length(x))
> x3 <- rnorm(length(x))
> x4 <- rnorm(length(x))
> Q <- 0.3*x3 + x + 0.2*x2 + id.eff[id] + 0.15*u + rnorm(length(x),sd=0.2)
> R <- 0.5*x4 + 0.2*x + 0.5*x2 + 0.7*id.eff[id] - 0.11*u + rnorm(length(x),sd=0.2)
> y <- x + 0.5*x2 + id.eff[id] + firm.eff[firm] + Q + R + u
> 
> ## estimate and print result
> est <- felm(y ~ x+x2+G(id)+G(firm)+Q+R,iv=list(Q ~ x3+x4, R ~ x3+x4))
> summary(est,robust=TRUE)

Call:
   felm(formula = y ~ x + x2 + G(id) + G(firm) + Q + R, iv = list(Q ~      x3 + x4, R ~ x3 + x4)) 

Residuals:
     Min       1Q   Median       3Q      Max 
-3.39149 -0.71961  0.02099  0.69218  3.76684 

Coefficients:
         Estimate Robust s.e t value Pr(>|t|)    
x         0.85967    0.10670   8.057 2.25e-15 ***
x2        0.45966    0.04732   9.713  < 2e-16 ***
`Q(fit)`  1.09306    0.10565  10.346  < 2e-16 ***
`R(fit)`  0.98367    0.05649  17.413  < 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.071 on 984 degrees of freedom
Multiple R-squared: 0.9208   Adjusted R-squared: 0.9195 
F-statistic: 762.9 on 15 and 984 DF, p-value: < 2.2e-16 


> 
> 
> proc.time()
   user  system elapsed 
  8.444   0.136   8.469 
